<div class="details-page">
  <div class="racks-grid">
    @for (rack of racks(); track rack.rackId) {
      <app-rack-card
        [rackName]="rack.rackName"
        [rackId]="rack.rackId"
        [minValue]="rack.minValue"
        [maxValue]="rack.maxValue"
        [isActive]="rack.isActive"
        (editCard)="onEditCard($event)"
      ></app-rack-card>
    }
    <button class="add-card-btn" (click)="onAddCard()">
      <svg width="48" height="48" viewBox="0 0 48 48" fill="none">
        <line x1="24" y1="12" x2="24" y2="36" stroke="currentColor" stroke-width="3" stroke-linecap="round"/>
        <line x1="12" y1="24" x2="36" y2="24" stroke="currentColor" stroke-width="3" stroke-linecap="round"/>
      </svg>
    </button>
  </div>

  @if (showAddModal) {
    <app-add-sensor-form 
      (closeModal)="onCloseModal()" 
      (submitSensor)="onSubmitSensor($event)">
    </app-add-sensor-form>
  }

  @if (showEditModal()) {
    <app-update-sensor-form 
      [sensorId]="editingSensor()?.rackId || ''"
      [sensorName]="editingSensor()?.rackName || ''"
      [minValue]="editingSensor()?.minValue || 0"
      [maxValue]="editingSensor()?.maxValue || 0"
      (closeModal)="onCloseEditModal()" 
      (updateSensor)="onUpdateSensor($event)">
    </app-update-sensor-form>
  }
</div>
